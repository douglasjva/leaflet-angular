function leafletMap(e){var t=e.defer();return{restrict:"E",replace:!0,transclude:!0,scope:{id:"@",center:"=",tileLayer:"="},controller:function(){var e=this;e.drawMarker=function(e){t.promise.then(function(t){t.addLayer(e)})},e.drawPolyline=function(e){t.promise.then(function(t){t.addLayer(e),t.fitBounds(e.getBounds())})}},controllerAs:"leafletMap",template:"<div><div ng-transclude></div></div>",link:function(e,n,a,l){var r=new L.Map(n[0],{center:[e.center.lat,e.center.lng],zoom:e.center.zoom,layers:[L.tileLayer(e.tileLayer.urlTemplate,e.tileLayer.options)]});t.resolve(r)}}}function markerLeaflet(){return{restrict:"E",scope:{latlng:"=",contentPopup:"=",options:"=",events:"="},require:"^leafletMap",link:function(e,t,n,a){function l(t){e.$apply(function(){e.latlng=t})}var r=L.marker([e.latlng.lat,e.latlng.lng],e.options);e.contentPopup&&r.bindPopup(e.contentPopup),e.options.draggable&&(e.events.dragstart&&r.on("dragstart",function(t){l(t.target.getLatLng()),e.events.dragstart(t)}),e.events.drag&&r.on("drag",function(t){l(t.target.getLatLng()),e.events.drag(t)}),e.events.dragend&&r.on("dragend",function(t){l(t.target.getLatLng()),e.events.dragend(t)})),e.$on("$destroy",function(){r.remove()}),e.$watch("latlng",function(e,t){angular.equals(e,t)||angular.equals(r.getLatLng(),e)||r.setLatLng([e.lat,e.lng])}),a.drawMarker(r)}}}function polylineLeaflet(){function e(e){var t=[];for(i=0;i<e.length;i++){var n=e[i];t[i]=new L.LatLng(n.lat,n.lng)}return t}return{restrict:"E",scope:{latlngs:"=",contentPopup:"=",options:"="},require:"^leafletMap",link:function(t,n,a,l){var r=new L.Polyline(e(t.latlngs),t.options);t.contentPopup&&r.bindPopup(t.contentPopup),t.$on("$destroy",function(){r.remove()}),t.$watch("latlngs",function(e,t){angular.equals(e,t)||r.setLatLngs(e)},!0),l.drawPolyline(r)}}}angular.module("leaflet-angular",[]),angular.module("leaflet-angular").directive("leafletMap",leafletMap),leafletMap.$inject=["$q"],angular.module("leaflet-angular").directive("markerLeaflet",markerLeaflet),markerLeaflet.$inject=[],angular.module("leaflet-angular").directive("polylineLeaflet",polylineLeaflet),polylineLeaflet.$inject=[];